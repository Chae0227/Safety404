<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${post.id == null ? '새 글 작성' : '게시글 수정'}"></title>
    <link rel="stylesheet" href="/css/header.css">
    <link rel="stylesheet" href="/css/board.css">
    <script th:src="@{/js/header.js}" defer></script>
</head>

<body>

<!-- 공통 헤더 -->
<th:block th:replace="~{layout/header :: siteHeader}"></th:block>

<div class="container">

    <div class="write-header">
        <h1 th:text="${post.id == null ? '📝 새 글 작성' : '✏️ 게시글 수정'}"></h1>

        <div class="write-buttons">
            <a href="/posts" class="btn btn-gray">취소</a>
            <button type="submit" form="postForm" class="btn btn-orange">저장</button>
        </div>
    </div>

    <form id="postForm"
          th:action="${post.id} != null ? @{'/posts/' + ${post.id}} : @{/posts}"
          method="post">

        <div class="form-box">

            <!-- 작성자 표시 + 옵션 -->
            <div class="writer-row">

                <span class="writer-label">👤 작성자</span>
                <span th:text="${post.writer != null ? post.writer : '비회원'}"></span>

                <!-- ⭐ 관리자만 상단고정 가능 -->
                <label th:if="${session.loginUser != null and session.loginUser.role == 'ROLE_ADMIN'}">
                    <input type="checkbox" name="pinned"
                           th:checked="${post.pinned}">
                    📌 상단 고정
                </label>

                <!-- ⭐ 익명 체크박스: 모두 가능 -->
                <label>
                    <input type="checkbox" name="anonymous"
                           th:checked="${post.writer == '익명'}">
                    🙈 익명
                </label>

            </div>

            <!-- 제목 -->
            <input type="text" name="title" placeholder="✏️ 제목을 입력하세요"
                   th:value="${post.title}" class="title-input"/>

            <!-- 내용 -->
            <textarea name="content" placeholder="내용을 자유롭게 작성하세요..."
                      th:text="${post.content}"></textarea>

        </div>

    </form>
</div>

</body>
</html>
